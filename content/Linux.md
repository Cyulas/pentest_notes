# File System

The FHS defines the purpose of each main directory on a Linux system. The top-level directories are described as follows:

    • /bin/: basic programs (ls, cd, cat, etc)
    • /boot/: Linux kernel and other files required for its early boot process
    • /dev/: device files
    • /etc/: configuration files
        ○ /etc/passwd - display users, directory, groups.
            Username:x indicates password needs to be pulled from shadow file
            user ID: 
            Group ID:John Doe is a comment field.
            /home directory location
            default shell
        ○ /etc/shadow - displays password hash. Available only to high privilege users.
        ○ /etc/group
    • /home/: user's personal files
    • /lib/: basic libraries
    • /media/: mount points for removable devices (CD/DVD-ROM, USB keys, and so on)
    • /mnt/ or /mount/: temporary mount point
    • /opt/: extra applications provided by third parties
    • /root/: administrator's (root's) personal files
    • /run/: volatile runtime data that does not persist across reboots (not yet included in the FHS)
    • /sbin/: system programs (fdisk, mkfs, sysctl, etc)
    • /srv/: data used by servers hosted on this system
    • /tmp/: temporary files (this directory is often emptied at boot)
    • /usr/: applications (this directory is further subdivided into bin, sbin, lib according to the same logic as in the root directory) Furthermore, /usr/share/ contains architecture-independent data. The /usr/local/ directory is meant to be used by the administrator for installing applications manually without overwriting files handled by the packaging system (dpkg).
        ○ /usr/bin - applications (apt, ncat, nmap, etc)
        ○ /usr/share - application support and data files
    • /var/: variable data handled by services. This includes log files, queues, spools, and caches.
    • /proc/ and /sys/ are specific to the Linux kernel (and not part of the FHS). They are used by the kernel for exporting data to user space.


# Permissions / Files

Each file or directory has specific permissions for three categories of users.

    •     Its owner (symbolized by u, as in user)
    •     Its owner group (symbolized by g, as in group), representing all the members of the group
    •     The others (symbolized by o, as in other)

In addition to this, three types of rights can be combined.

    •     reading (symbolized by r, as in __r__ead)
    •     writing (or modifying, symbolized by w, as in __w__rite)
    •     executing (symbolized by x, as in e__X__ecute)

The second way to represent rights is via an octal numeric representation. It associates each right with a value.

    •     4 for read
    •     2 for write
    •     1 for execute

    We associate each combination of rights with the sum of the three figures.

    •     7 = 4 + 2 + 1 = read, write, and execute
    •     6 = 4 + 2 = read and write
    •     5 = 4 + 1 = read and execute
    •     3 = 2 + 1 = write and execute

chmod 754 a file would therefore appear as rwxr-xr-- when listing permissions
chmod 640 a file would appear as rw-r-----

# Common Commands
## Find
find - look for files in the system

Find by Name
* find . -name flag1.txt: find the file named “flag1.txt” in the current directory
* find /home -name flag1.txt: find the file names “flag1.txt” in the /home directory
* find / -type d -name config: find the directory named config under “/”
* find / -name perl*
* find / -name python*
* find / -name gcc*

Find By Permission
* find / -type f -perm 0777: find files with the 777 permissions (files readable, writable, and executable by all users)
* find / -perm a=x: find executable files
* find /home -user frank: find all files for user “frank” under “/home”

Find By Time
* find / -mtime 10: find files that were modified in the last 10 days
* find / -atime 10: find files that were accessed in the last 10 day
* find / -cmin -60: find files changed within the last hour (60 minutes)
* find / -amin -60: find files accesses within the last hour (60 minutes)
* find / -size 50M: find files with a 50 MB size
  * can be used with + or - sign to specify a file that is larger or smaller than the given size.

Folders and files that can be written to or executed from: 
* find / -writable -type d 2>/dev/null : Find world-writeable folders
* find / -perm -222 -type d 2>/dev/null: Find world-writeable folders
* find / -perm -o w -type d 2>/dev/null: Find world-writeable folders
* find / -perm -o x -type d 2>/dev/null : Find world-executable folders


##

# Enumeration

Collect information about a Linux box to identify potential vulnerabilities and privilege escalation paths.

* hostname : get the hostname of a target machine
* uname -a : Details about the kernel
* cat /proc/version : provides information about target system processes
* cat /etc/issue : provides information about OS
* ps (-A, axjf, aux) : provides running processes on the machine. 
  * -A shows all running processes
  * axjf shows process tree
  * ps aux will show processes for all users 
    * (a), display the user that launched the process 
    * (u), and show processes not attached to a terminal 
    * (x), 
* env : env command will show environmental variables. The PATH variable may have a compiler or a scripting language that could be used to run code on the target system or leveraged for privilege escalation.
* sudo -l : can be used to list all commands user can run using sudo.
* ls (-al, or -l) : list files and documents
* id : provides general overview of the users privilege level and group memberships
* cat /etc/passwd : Discover users on the system
* history : provide information previously typed into the commandline, perhaps usernames and passwords.
* ifconfig : network interface information
* netstat (-a, -at, -l, -tp) : determine which ports and connections are existing, including services that are listening.


# Privilege Escalation